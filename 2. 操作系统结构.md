# 内核
## 内核的功能
* 进程调度，决定哪个进程、线程使用CPU
* 内存管理，内存的分配与回收
* 硬件通信，为进程和硬件设备之间提供通信能力
* 系统调用，用户程序与操作系统间的接口，程序运行需要更高级别的权限时便需要进行系统调用
![](0.%20Images/System%20Call.png)

# Linux设计
## Linux的设计主要有以下四点：
* MultiTask  
  并发：单核CPU某一时间段执行不同的任务  
  并行：多核CPU同一时间段执行不同的任务
* SMP  
  对称多处理，即每个CPU地位平等，拥有的资源也相同，因此保证了每个进程都可以呗分配到任意CPU上执行而不会存在某个CPU单独服务应用程序或内核程序。
* ELF  
  可执行链接文件格式，是Linux中可执行文件的存储格式。
  ![](0.%20Images/ELF%20Structure.png)  
  生成：源代码->汇编代码->链接器  
  执行：使用装载器将文件加载至内存，CPU进行指令存取
* Monolithic Kernel  
  宏内核意味着整个Linux是一个完整的可执行程序，且拥有最高权限。  
  宏内核的特征是所有模块都在内核态，如进程调度、内存管理、文件系统、设备驱动等。  
  Linux也实现了部分动态加载内核，如大部分的驱动程序，这使得开发解耦。  
  **与宏内核相反的是微内核。**  
  微内核只保留核心功能，其余功能均需要加载。提高了系统的稳定性和可靠性，也需要承担性能损耗这个代价。  
  **混合型内核。**  
  类似于宏内核中包裹着微内核的结构。

# Windows设计
Windows 7、Windows 10所使用的内核是Windows NT(New Technology)，是一种混合型内核。  
### Windows的可执行文件格式与Linux不同
Windows下的可执行文件格式为PE，及可移植执行文件，格式有：.exe、.dll、.sys等，与ELF仍有相似之处。
